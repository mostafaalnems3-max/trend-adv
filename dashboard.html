<form id="google-form">
    <input type="text" id="siteName" placeholder="ุงุณู ุงูููุงูุฉ" required>
    
    <label>๐ธ ุตูุฑุฉ ุงูููุญุฉ:</label>
    <input type="file" id="adImage" accept="image/*" required>
    
    <input type="text" id="location" placeholder="ุงูุฅุญุฏุงุซูุงุช (ูุซุงู: 30.1, 31.2)" required>
    
    <label>๐ก๏ธ ุตูุฑุฉ QR ุงูุฑุฎุตุฉ:</label>
    <input type="file" id="qrCode" accept="image/*" required>

    <button type="submit" id="submitBtn">ุฅุฑุณุงู ุงูุจูุงูุงุช ูุงูุตูุฑ ๐</button>
</form>

<script>
    const scriptURL = 'ุฑุงุจุท_ุฌูุฌู_ุณูุฑูุจุช_ุงูุฌุฏูุฏ'; // ุณุชุญุตู ุนููู ูู ุงูุฎุทูุฉ ุงููุงุฏูุฉ

    document.getElementById('google-form').addEventListener('submit', async function(e) {
        e.preventDefault();
        const btn = document.getElementById('submitBtn');
        btn.disabled = true;
        btn.innerHTML = "ุฌุงุฑู ุฑูุน ุงูุตูุฑ... ุงูุชุธุฑ ููููุงู";

        // ูุธููุฉ ูุชุญููู ุงูุตูุฑุฉ ููุต (Base64)
        const toBase64 = file => new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result.split(',')[1]);
            reader.onerror = error => reject(error);
        });

        try {
            const imgFile = document.getElementById('adImage').files[0];
            const qrFile = document.getElementById('qrCode').files[0];

            const data = {
                siteName: document.getElementById('siteName').value,
                location: document.getElementById('location').value,
                adImageName: imgFile.name,
                adImageData: await toBase64(imgFile),
                qrCodeName: qrFile.name,
                qrCodeData: await toBase64(qrFile)
            };

            fetch(scriptURL, {
                method: 'POST',
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(res => {
                alert('ุงููู ูููุฑ! ุงูุตูุฑ ุงุชุฑูุนุช ูุงูุจูุงูุงุช ุงุชุณุฌูุช โ');
                location.reload();
            });

        } catch (err) {
            alert('ุญุตู ุฎุทุฃ ูู ุงูุฑูุนุ ุฌุฑุจ ุชุงูู');
            btn.disabled = false;
        }
    });
</script>
