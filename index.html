<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trend Adv | Ù…Ù†ØµØ© Ø­Ø¬Ø² Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #004e92;
            --accent: #ffcc00;
            --dark-blue: #000428;
            --cyan: #00d2ff;
            --glass: rgba(255, 255, 255, 0.9);
        }

        body {
            background: #f4f7f6;
            margin: 0;
            padding: 0;
            font-family: 'Cairo', sans-serif;
            overflow-x: hidden;
            transition: all 0.4s ease;
        }

        /* Ù…Ø­ÙˆÙ„ Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ø¹Ø§Ø¦Ù… */
        .lang-selector {
            position: fixed; top: 20px; left: 20px; z-index: 2000;
            background: var(--glass); backdrop-filter: blur(10px);
            border: 1px solid #ddd; padding: 5px 15px; border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .lang-selector select { border: none; background: transparent; font-weight: bold; outline: none; cursor: pointer; }

        /* Header & Logo */
        header { text-align: center; padding: 20px; background: white; }
        .logo { font-size: 2.5rem; font-weight: bold; }
        .t-brand { color: var(--primary); font-size: 3rem; }
        .brand-name { color: var(--dark-blue); }

        /* Hero Search Section */
        .hero-search {
            background: linear-gradient(135deg, var(--dark-blue), var(--primary));
            padding: 80px 20px; text-align: center; color: white;
            clip-path: ellipse(150% 100% at 50% 0%);
        }

        .search-box-wrapper {
            max-width: 700px; margin: 30px auto; display: flex;
            background: white; padding: 8px; border-radius: 60px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }
        .search-box-wrapper input {
            flex: 1; border: none; padding: 15px 25px;
            border-radius: 60px; outline: none; font-size: 18px; color: #333;
        }
        .search-btn {
            background: var(--accent); color: #000; border: none;
            padding: 0 40px; border-radius: 60px; font-weight: bold;
            cursor: pointer; transition: 0.3s;
        }
        .search-btn:hover { transform: scale(1.05); background: #f0c000; }

        /* Promo Banner */
        .promo-banner {
            background: linear-gradient(45deg, #9d50bb, #00d2ff);
            overflow: hidden; white-space: nowrap; padding: 12px 0;
            box-shadow: 0 5px 15px rgba(0, 210, 255, 0.3);
        }
        .scrolling-text {
            display: inline-block; animation: marquee 25s linear infinite;
            font-weight: bold; color: white; font-size: 1.1rem;
        }
        @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* Gallery Structure */
        #adsGallery {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px; padding: 40px 20px; max-width: 1200px; margin: 0 auto;
        }

        .ad-card {
            background: white; border-radius: 20px; overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: 0.3s;
            position: relative;
        }
        .ad-card:hover { transform: translateY(-10px); }
        .ad-card img { width: 100%; height: 200px; object-fit: cover; }
        .duration-tag {
            position: absolute; top: 10px; right: 10px;
            background: var(--accent); padding: 5px 15px;
            border-radius: 20px; font-size: 12px; font-weight: bold;
        }
        .card-body { padding: 20px; text-align: center; }
        .book-btn {
            width: 100%; padding: 12px; background: var(--primary);
            color: white; border: none; border-radius: 10px;
            font-weight: bold; cursor: pointer; margin-top: 15px;
        }

        /* Controls */
        .main-controls { text-align: center; padding: 30px; }
        .btn-action {
            padding: 15px 30px; margin: 10px; border-radius: 50px;
            border: none; font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        .btn-map { background: var(--primary); color: white; }
        .btn-agency { background: #28a745; color: white; text-decoration: none; display: inline-block; }

        /* Map */
        #map { height: 400px; width: 90%; margin: 20px auto; border-radius: 20px; display: none; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }

        /* Social Sidebar */
        .social-sidebar { position: fixed; right: 20px; top: 50%; transform: translateY(-50%); z-index: 1000; display: flex; flex-direction: column; gap: 10px; }
        .social-sidebar a { width: 45px; height: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; text-decoration: none; font-size: 20px; }
        .wa { background: #25d366; } .fb { background: #1877f2; } .li { background: #0077b5; }
    </style>
</head>
<body>

<div class="lang-selector">
    <select id="langPicker" onchange="changeLanguage(this.value)">
        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡ªğŸ‡¬</option>
        <option value="en">English ğŸ‡ºğŸ‡¸</option>
    </select>
</div>

<header>
    <div class="logo"><span class="t-brand">T</span><span class="brand-name">rend Adv</span></div>
    <div id="subTitle">Ø£ÙˆÙ„ Ù…Ù†ØµØ© Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ù…ØµØ± ÙˆØ§Ù„ÙˆØ·Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠ</div>
</header>

<div class="promo-banner">
    <div class="scrolling-text" id="promoText">
        ğŸ“¢ Ø¹Ø±Ø¶ Ø­ØµØ±ÙŠ Ù„Ù„ÙˆÙƒØ§Ù„Ø§Øª: Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù† ÙˆØ§Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø§ØªÙƒ Ù…Ø¬Ø§Ù†Ø§Ù‹ Ù„Ù…Ø¯Ø© 3 Ø´Ù‡ÙˆØ±! â€” Trend Adv Ø¨ÙˆØ§Ø¨ØªÙƒ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ø¹Ù„Ù†ÙŠÙ† â€” 
    </div>
</div>

<div class="hero-search">
    <h1 style="color: white; margin-bottom: 30px;">Trend Adv</h1>
    <div class="search-box-wrapper">
        <input type="text" id="mainSearchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø§Ø¹Ù„Ø§Ù† Ø§Ù„Ù‚Ø±ÙŠØ¨ Ù…Ù†Ùƒ..." onkeyup="startGlobalSearch()">
        <button class="search-btn" id="searchBtn" onclick="startGlobalSearch()">Ø¨Ø­Ø«</button>
    </div>
</div>


<div class="main-controls">
    <button class="btn-action btn-map" id="mapBtn" onclick="showMap()">ğŸ“ Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ø§Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
    <a href="dashboard.html" class="btn-action btn-agency" id="agencyBtn">ğŸ¢ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ÙˆÙƒØ§Ù„Ø§Øª (Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…)</a>
</div>

<div id="map"></div>

<div id="adsGallery">
    </div>

<div class="social-sidebar">
    <a href="https://wa.me/201027676344" class="wa"><i class="fab fa-whatsapp"></i></a>
    <a href="https://www.facebook.com/share/1A8tTYNpdP/" class="fb"><i class="fab fa-facebook-f"></i></a>
    <a href="https://www.linkedin.com/in/mostafa-alnems-02b569330" class="li"><i class="fab fa-linkedin-in"></i></a>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const GOOGLE_URL = "https://script.google.com/macros/s/AKfycbxhoTguhGJBLhE04m9_RF6WlUKvQg7zW6yLhE5tOHSPqfhlv6-04PT3qyH5Ci0K6EsW/exec";
    
    let allAds = [];

    // Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„Ù„ØºØ§Øª
    const translations = {
        ar: {
            title: "Ø£ÙƒØ¨Ø± Ù…Ù†ØµØ© Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø·Ø±Ù‚",
            sub: "Ø£ÙˆÙ„ Ù…Ù†ØµØ© Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ù…ØµØ± ÙˆØ§Ù„ÙˆØ·Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠ",
            placeholder: "Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†Ø·Ù‚Ø© Ø£Ùˆ Ø´Ø§Ø±Ø¹...",
            searchBtn: "Ø¨Ø­Ø«",
            mapBtn: "ğŸ“ Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ø§Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©",
            agencyBtn: "ğŸ¢ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ÙˆÙƒØ§Ù„Ø§Øª (Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…)",
            book: "Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†",
            promo: "ğŸ“¢ Ø¹Ø±Ø¶ Ø­ØµØ±ÙŠ Ù„Ù„ÙˆÙƒØ§Ù„Ø§Øª: Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù† ÙˆØ§Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø§ØªÙƒ Ù…Ø¬Ø§Ù†Ø§Ù‹ Ù„Ù…Ø¯Ø© 3 Ø´Ù‡ÙˆØ±!",
            dir: "rtl"
        },
        en: {
            title: "The Largest Billboard Platform",
            sub: "The first advertising map platform in the Arab world",
            placeholder: "Search for area or street...",
            searchBtn: "Search",
            mapBtn: "ğŸ“ Explore Ads on Map",
            agencyBtn: "ğŸ¢ Agency Portal (Dashboard)",
            book: "Book Now",
            promo: "ğŸ“¢ Exclusive Offer: Join now and display your boards for FREE for 3 months!",
            dir: "ltr"
        }
    };

    function changeLanguage(lang) {
        const t = translations[lang];
        document.body.dir = t.dir;
        document.getElementById('mainTitle').innerText = t.title;
        document.getElementById('subTitle').innerText = t.sub;
        document.getElementById('mainSearchInput').placeholder = t.placeholder;
        document.getElementById('searchBtn').innerText = t.searchBtn;
        document.getElementById('mapBtn').innerText = t.mapBtn;
        document.getElementById('agencyBtn').innerText = t.agencyBtn;
        document.getElementById('promoText').innerText = t.promo;
        renderAds(allAds);
    }

    async function loadAds() {
        const gal = document.getElementById('adsGallery');
        gal.innerHTML = "<p style='text-align:center; grid-column:1/-1;'>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©...</p>";
        try {
            const res = await fetch(GOOGLE_URL);
            allAds = await res.json();
            renderAds(allAds);
        } catch (e) {
            console.error("Fetch error");
            gal.innerHTML = "<p style='text-align:center; grid-column:1/-1;'>Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ø­Ø§Ù„ÙŠØ§Ù‹.</p>";
        }
    }

    function renderAds(ads) {
        const gal = document.getElementById('adsGallery');
        gal.innerHTML = "";
        const lang = document.getElementById('langPicker').value;
        
        ads.forEach(ad => {
            gal.innerHTML += `
                <div class="ad-card">
                    <div class="duration-tag">${ad.duration || '3 Months Free'}</div>
                    <img src="${ad.siteImg || ad.img}" onerror="this.src='https://via.placeholder.com/400x250?text=Trend+Adv'">
                    <div class="card-body">
                        <h3 style="color:var(--primary); margin:0;">${ad.siteName || ad.title}</h3>
                        <p style="font-size:14px; color:#666;">${ad.siteGeo || ad.coords}</p>
                        <button class="book-btn" onclick="window.open('https://wa.me/201027676344')">${translations[lang].book}</button>
                    </div>
                </div>`;
        });
    }

    function startGlobalSearch() {
        const query = document.getElementById('mainSearchInput').value.toLowerCase();
        const filtered = allAds.filter(ad => 
            (ad.siteName || ad.title).toLowerCase().includes(query) || 
            (ad.siteGeo || ad.coords).toLowerCase().includes(query)
        );
        renderAds(filtered);
    }

    function showMap() {
        const mapDiv = document.getElementById('map');
        mapDiv.style.display = 'block';
        const map = L.map('map').setView([30.0444, 31.2357], 11);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        
        allAds.forEach(ad => {
            // Ù…Ø­Ø§ÙƒØ§Ø© ÙˆØ¶Ø¹ Ù…Ø§Ø±ÙƒØ± Ù„Ùˆ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠÙ‡Ø§ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©
            if(ad.siteGeo && ad.siteGeo.includes(',')) {
                const latlng = ad.siteGeo.split(',');
                L.marker([latlng[0], latlng[1]]).addTo(map).bindPopup(ad.siteName);
            }
        });
        setTimeout(() => map.invalidateSize(), 200);
    }

    window.onload = loadAds;


<script>
// Ø¯Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© - Ø¨ØªØ´ØªØºÙ„ Ù…Ø¹ Ø§Ù„ÙƒØªØ§Ø¨Ø© (onkeyup) Ø£Ùˆ Ù…Ø¹ Ø²Ø±Ø§Ø± Ø§Ù„Ø¨Ø­Ø« (onclick)
function startGlobalSearch() {
    // 1. Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù„ÙŠ Ø§Ù„ÙŠÙˆØ²Ø± ÙƒØªØ¨Ù‡Ø§
    const query = document.getElementById('mainSearchInput').value.toLowerCase().trim();
    
    // 2. Ø§Ù„ØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„Ø¯Ø§ØªØ§ (allAds) Ø§ØªØ­Ù…Ù„Øª ÙØ¹Ù„Ø§Ù‹ Ù…Ù† Ø¬ÙˆØ¬Ù„ Ø´ÙŠØª
    if (typeof allAds === 'undefined' || allAds.length === 0) {
        console.warn("Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...");
        return;
    }

    // 1. ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ§Ù„Ù…Ø®Ø²Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ†ÙˆØ§ Ø¨Ø±Ù‡ Ø§Ù„Ø¯ÙˆØ§Ù„)
const GOOGLE_URL = "https://script.google.com/macros/s/AKfycbxhoTguhGJBLhE04m9_RF6WlUKvQg7zW6yLhE5tOHSPqfhlv6-04PT3qyH5Ci0K6EsW/exec";
let allAds = []; 

// 2. Ø¯Ø§Ù„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø¬ÙˆØ¬Ù„ Ø´ÙŠØª (Ø¨ØªØ´ØªØºÙ„ Ø£ÙˆÙ„ Ù…Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙŠÙØªØ­)
async function loadAds() {
    const gal = document.getElementById('adsGallery');
    try {
        const res = await fetch(GOOGLE_URL);
        allAds = await res.json();
        renderAds(allAds); // Ø§Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ù„ÙˆØ­Ø§Øª ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
    } catch (e) {
        console.error("Ø¹Ø·Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", e);
        if(gal) gal.innerHTML = "<p style='text-align:center;'>Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</p>";
    }
}

// 3. Ø¯Ø§Ù„Ø© Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØµÙ„Ø­Ø© (Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù„ÙŠ ÙƒØ§Ù† Ù…Ø¹Ø·Ù„)
function startGlobalSearch() {
    // Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ÙƒÙ„Ù…Ø© Ù…Ù† Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
    const query = document.getElementById('mainSearchInput').value.toLowerCase().trim();
    
    // ØªØ£Ù…ÙŠÙ†: Ù„Ùˆ Ø§Ù„Ø¯Ø§ØªØ§ Ù„Ø³Ù‡ Ù…Ø§ ÙˆØµÙ„ØªØ´ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
    if (!allAds || allAds.length === 0) return;

    // Ø§Ù„ÙÙ„ØªØ±Ø© Ø§Ù„Ø°ÙƒÙŠØ© (Ø¨ØªØ¯ÙˆØ± ÙÙŠ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹)
    const filtered = allAds.filter(ad => {
        const title = (ad.siteName || ad.title || "").toLowerCase();
        const loc = (ad.siteGeo || ad.coords || "").toLowerCase();
        return title.includes(query) || loc.includes(query);
    });

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ±ÙˆØª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ÙÙ„ØªØ±Ø©
    renderAds(filtered);
}

// 4. Ø¯Ø§Ù„Ø© Ø±Ø³Ù… Ø§Ù„ÙƒØ±ÙˆØª (Ø§Ù„ØªÙŠ ØªØ¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…)
function renderAds(adsToDraw) {
    const gal = document.getElementById('adsGallery');
    if (!gal) return;
    
    gal.innerHTML = ""; // Ù…Ø³Ø­ Ø§Ù„Ù‚Ø¯ÙŠÙ…
    
    if (adsToDraw.length === 0) {
        gal.innerHTML = "<p style='text-align:center; width:100%;'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ·Ø§Ø¨Ù‚ Ø¨Ø­Ø«Ùƒ.</p>";
        return;
    }

    adsToDraw.forEach(ad => {
        gal.innerHTML += `
            <div class="ad-card">
                <div class="duration-tag">${ad.duration || '3 Ø´Ù‡ÙˆØ± Ù…Ø¬Ø§Ù†Ø§Ù‹'}</div>
                <img src="${ad.img || ad.siteImg}" onerror="this.src='https://via.placeholder.com/400x250/004e92/ffffff?text=Trend+Adv'">
                <div class="card-body">
                    <b style="color:#004e92; font-size:1.1rem;">${ad.title || ad.siteName}</b>
                    <p style="font-size:12px; color:#666; margin: 10px 0;">${ad.coords || ad.siteGeo}</p>
                    <button class="book-btn" onclick="window.open('https://wa.me/201027676344')">Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</button>
                </div>
            </div>`;
    });
}

// 5. Ø£Ù…Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
window.onload = loadAds;


</script>
</body>
</html>
