<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trend Adv | Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        :root { --cyan: #00d2ff; --dark: #0a0a0a; --card: #161616; --purple: #9d50bb; --red: #ff0000; }
        body { background: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 30px; overflow-x: hidden; }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ */
        header { text-align: center; padding: 30px 10px; background: #000; border-bottom: 3px solid #222; }
        .logo-container { display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap; }
        
        .trend-text { 
            background: linear-gradient(90deg, var(--cyan), var(--purple), var(--cyan)); 
            background-size: 200% auto;
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            font-size: 4rem; 
            font-weight: 900; 
            animation: moveGradient 3s linear infinite, glow 3s infinite;
            letter-spacing: -2px;
        }
        
        .adv-text { 
            color: var(--red); 
            font-size: 3.5rem; 
            font-weight: 800; 
            text-transform: uppercase;
            filter: drop-shadow(0 0 5px rgba(255, 0, 0, 0.5));
        }

        @keyframes moveGradient { 0% { background-position: 0% 50%; } 100% { background-position: 200% 50%; } }
        @keyframes glow { 0%, 100% { filter: drop-shadow(0 0 10px var(--cyan)); } 50% { filter: drop-shadow(0 0 20px var(--purple)); } }

        /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ù…ØªØ­Ø±Ùƒ */
        .promo-banner { background: linear-gradient(45deg, #222, #000); border-bottom: 1px solid var(--cyan); overflow: hidden; white-space: nowrap; padding: 10px 0; }
        .scrolling-text { display: inline-block; animation: marquee 25s linear infinite; font-weight: bold; color: var(--cyan); font-size: 1.1rem; }
        @keyframes marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ù„ÙˆØ­Ø© */
        .main-controls { display: flex; justify-content: center; gap: 15px; padding: 20px; }
        .btn-action { background: var(--cyan); color: #000; border: none; padding: 15px 35px; border-radius: 50px; font-weight: bold; cursor: pointer; transition: 0.3s; font-size: 1.1rem; }
        .btn-agency { background: transparent; border: 2px solid var(--red); color: var(--red); }
        .btn-agency:hover { background: var(--red); color: white; }

        .admin-panel { background: #151515; margin: 20px; padding: 30px; border-radius: 20px; border: 1px dashed var(--cyan); display: none; box-shadow: 0 0 20px rgba(0,210,255,0.1); }
        .admin-panel input, .admin-panel select { width: 100%; padding: 15px; margin: 10px 0; border-radius: 12px; border: 1px solid #333; background: #000; color: white; }

        /* Ø§Ù„ÙƒØ±ÙˆØª */
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; padding: 25px; }
        .ad-card { background: var(--card); border-radius: 25px; overflow: hidden; position: relative; border: 1px solid #333; transition: 0.4s; }
        .ad-card:hover { transform: translateY(-10px); border-color: var(--cyan); }
        .duration-tag { position: absolute; top: 15px; left: 15px; background: var(--red); color: white; padding: 6px 12px; border-radius: 8px; font-size: 0.8rem; font-weight: bold; z-index: 10; }
        .ad-card img { width: 100%; height: 260px; object-fit: cover; }
        .card-body { padding: 20px; text-align: center; }
        .book-btn { width: 100%; background: var(--cyan); color: #000; border: none; padding: 15px; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1rem; }
    </style>
</head>
<body>

<header>
    <div class="logo-container">
        <span class="trend-text">Trend</span>
        <span class="adv-text">Adv</span>
    </div>
</header>

<div class="promo-banner">
    <div class="scrolling-text">
        ğŸš€ Ø¹Ø±Ø¶ Ø®Ø§Øµ Ù„Ù„ÙˆÙƒØ§Ù„Ø§Øª: Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù† ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ 3 Ø´Ù‡ÙˆØ± Ù…Ø¬Ø§Ù†Ø§Ù‹ â€” Ø§Ø±ÙØ¹ Ù„ÙˆØ­Ø§ØªÙƒ ÙˆØ´Ø§Ù‡Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙÙˆØ±Ø§Ù‹ Ù…Ø¹ Trend Adv ğŸš€
    </div>
</div>

<div class="main-controls">
    <button class="btn-action" onclick="showMap()">ğŸ“ Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
    <button class="btn-action btn-agency" onclick="toggleAdmin()">ğŸ¢ Ø³Ø¬Ù„ Ù„ÙˆØ­ØªÙƒ (Ù…Ø¬Ø§Ù†Ø§Ù‹)</button>
</div>

<div class="admin-panel" id="adminPanel">
    <h3 style="color:var(--cyan)">Ø¥Ø¶Ø§ÙØ© Ù„ÙˆØ­Ø© Ø¥Ø¹Ù„Ø§Ù†ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h3>
    <input type="text" id="siteName" placeholder="Ø§Ø³Ù… Ø§Ù„ÙˆÙƒØ§Ù„Ø© (Ø§Ù„Ø¹Ù…ÙˆØ¯ B)">
    <input type="text" id="siteImg" placeholder="Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø§Ù„Ù„ÙˆØ­Ø© (Ø§Ù„Ø¹Ù…ÙˆØ¯ C)">
    <input type="text" id="siteGeo" placeholder="Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª GPS (Ø§Ù„Ø¹Ù…ÙˆØ¯ D)">
    
    <label style="color:#888; font-size:0.8rem; margin-right:10px;">Ù…Ø¯Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Ø§Ù„Ø¹Ù…ÙˆØ¯ E):</label>
    <select id="siteDuration">
        <option value="3 Ø´Ù‡ÙˆØ± Ù…Ø¬Ø§Ù†Ø§Ù‹">3 Ø´Ù‡ÙˆØ± Ù…Ø¬Ø§Ù†Ø§Ù‹ (Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙƒØ§Ù„Ø§Øª)</option>
        <option value="6 Ø´Ù‡ÙˆØ±">6 Ø´Ù‡ÙˆØ±</option>
        <option value="Ø³Ù†Ø© ÙˆØ§Ø­Ø¯Ø©">Ø³Ù†Ø© ÙˆØ§Ø­Ø¯Ø©</option>
    </select>

    <input type="text" id="adminNote" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© (Ø§Ù„Ø¹Ù…ÙˆØ¯ F)">
    <input type="text" id="dropdownBackup" placeholder="ØªØµÙ†ÙŠÙ Ø¥Ø¶Ø§ÙÙŠ (Ø§Ù„Ø¹Ù…ÙˆØ¯ G)">
    
    <button class="book-btn" id="sendBtn" onclick="submitToSheet()">ØªØ£ÙƒÙŠØ¯ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
</div>

<div id="map" style="height: 400px; width: 90%; margin: 0 auto; border-radius: 20px; display: none;"></div>
<div class="gallery" id="adsGallery"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    const GOOGLE_URL = "https://script.google.com/macros/s/AKfycbxhoTguhGJBLhE04m9_RF6WlUKvQg7zW6yLhE5tOHSPqfhlv6-O4PT3qyH5Ci0K6EsW/exec";

    async function loadAds() {
        const gal = document.getElementById('adsGallery');
        try {
            const res = await fetch(GOOGLE_URL);
            const data = await res.json();
            gal.innerHTML = "";
            if(data && data.length > 0) {
                data.forEach(ad => {
                    gal.innerHTML += `
                        <div class="ad-card">
                            <div class="duration-tag">${ad.duration || '3 Ø´Ù‡ÙˆØ± Ù…Ø¬Ø§Ù†Ø§Ù‹'}</div>
                            <img src="${ad.img}" onerror="this.src='https://via.placeholder.com/400x250/111/ff0000?text=Trend+Adv'">
                            <div class="card-body">
                                <b style="color:var(--cyan); font-size:1.2rem;">${ad.title}</b>
                                <p style="font-size:12px; color:#aaa; margin: 10px 0;">${ad.coords}</p>
                                <p style="font-size:10px; color:var(--red);">${ad.adminNote || ''}</p>
                                <button class="book-btn" onclick="window.open('https://wa.me/201027676344')">Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù† Ù…Ø¬Ø§Ù†Ø§Ù‹</button>
                            </div>
                        </div>`;
                });
            }
        } catch (e) { console.log("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„"); }
    }

    async function submitToSheet() {
        const btn = document.getElementById('sendBtn');
        const payload = {
            title: document.getElementById('siteName').value,
            img: document.getElementById('siteImg').value,
            coords: document.getElementById('siteGeo').value,
            duration: document.getElementById('siteDuration').value,
            adminNote: document.getElementById('adminNote').value,
            dropdownChoice: document.getElementById('dropdownBackup').value
        };
        
        if(!payload.title || !payload.img) return alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø§Ù„Ø®Ø§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©");
        
        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø´ÙŠØª...";
        await fetch(GOOGLE_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(payload) });
        alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ø³Ø¨Ø¹Ø©!");
        location.reload();
    }

    function toggleAdmin() { const p = document.getElementById('adminPanel'); p.style.display = p.style.display === 'block' ? 'none' : 'block'; }
    function showMap() { document.getElementById('map').style.display = 'block'; var map = L.map('map').setView([30.04, 31.23], 11); L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map); setTimeout(() => map.invalidateSize(), 200); }

    window.onload = loadAds;
</script>
</body>
</html>
